{"version":3,"file":"index.esm.js","sources":["../src/ImagePool.ts","../src/LoadImagePlugin.ts","../src/index.ts"],"sourcesContent":["import { DisplayObject, GradientType, UnitType, computeLinearGradient, computeRadialGradient, isBrowser, parseTransform, parsedTransformToMat4, } from '@antv/g-lite';\nimport { isString } from '@antv/util';\nimport { mat4 } from 'gl-matrix';\nvar ImagePool = /** @class */ (function () {\n    function ImagePool(canvasConfig) {\n        this.canvasConfig = canvasConfig;\n        this.imageCache = {};\n        this.gradientCache = {};\n        this.patternCache = {};\n    }\n    ImagePool.prototype.getImageSync = function (src, callback) {\n        if (!this.imageCache[src]) {\n            this.getOrCreateImage(src).then(function (img) {\n                if (callback) {\n                    callback(img);\n                }\n            });\n        }\n        else {\n            if (callback) {\n                callback(this.imageCache[src]);\n            }\n        }\n        return this.imageCache[src];\n    };\n    ImagePool.prototype.getOrCreateImage = function (src) {\n        var _this = this;\n        if (this.imageCache[src]) {\n            return Promise.resolve(this.imageCache[src]);\n        }\n        // @see https://github.com/antvis/g/issues/938\n        var createImage = this.canvasConfig.createImage;\n        return new Promise(function (resolve, reject) {\n            var image;\n            if (createImage) {\n                image = createImage(src);\n            }\n            else if (isBrowser) {\n                image = new window.Image();\n            }\n            if (image) {\n                image.onload = function () {\n                    _this.imageCache[src] = image;\n                    resolve(image);\n                };\n                image.onerror = function (ev) {\n                    reject(ev);\n                };\n                image.crossOrigin = 'Anonymous';\n                image.src = src;\n            }\n        });\n    };\n    ImagePool.prototype.getOrCreatePatternSync = function (pattern, context, $offscreenCanvas, dpr, callback) {\n        var patternKey = this.generatePatternKey(pattern);\n        if (patternKey && this.patternCache[patternKey]) {\n            return this.patternCache[patternKey];\n        }\n        var image = pattern.image, repetition = pattern.repetition, transform = pattern.transform;\n        var src;\n        var needScaleWithDPR = false;\n        // Image URL\n        if (isString(image)) {\n            src = this.getImageSync(image, callback);\n        }\n        else if ($offscreenCanvas) {\n            src = $offscreenCanvas;\n            needScaleWithDPR = true;\n        }\n        else {\n            src = image;\n        }\n        // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/createPattern\n        var canvasPattern = src && context.createPattern(src, repetition);\n        if (canvasPattern) {\n            var mat = void 0;\n            // @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasPattern/setTransform\n            if (transform) {\n                mat = parsedTransformToMat4(parseTransform(transform), new DisplayObject({}));\n            }\n            else {\n                mat = mat4.identity(mat4.create());\n            }\n            if (needScaleWithDPR) {\n                mat4.scale(mat, mat, [1 / dpr, 1 / dpr, 1]);\n            }\n            canvasPattern.setTransform({\n                a: mat[0],\n                b: mat[1],\n                c: mat[4],\n                d: mat[5],\n                e: mat[12],\n                f: mat[13],\n            });\n        }\n        if (patternKey && canvasPattern) {\n            this.patternCache[patternKey] = canvasPattern;\n        }\n        return canvasPattern;\n    };\n    ImagePool.prototype.getOrCreateGradient = function (params, context) {\n        var key = this.generateGradientKey(params);\n        var type = params.type, steps = params.steps, width = params.width, height = params.height, angle = params.angle, cx = params.cx, cy = params.cy, size = params.size;\n        if (this.gradientCache[key]) {\n            return this.gradientCache[key];\n        }\n        var gradient = null;\n        if (type === GradientType.LinearGradient) {\n            var _a = computeLinearGradient(width, height, angle), x1 = _a.x1, y1 = _a.y1, x2 = _a.x2, y2 = _a.y2;\n            // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/createLinearGradient\n            gradient = context.createLinearGradient(x1, y1, x2, y2);\n        }\n        else if (type === GradientType.RadialGradient) {\n            var _b = computeRadialGradient(width, height, cx, cy, size), x = _b.x, y = _b.y, r = _b.r;\n            // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/createRadialGradient\n            gradient = context.createRadialGradient(x, y, 0, x, y, r);\n        }\n        if (gradient) {\n            steps.forEach(function (_a) {\n                var offset = _a.offset, color = _a.color;\n                if (offset.unit === UnitType.kPercentage) {\n                    gradient === null || gradient === void 0 ? void 0 : gradient.addColorStop(offset.value / 100, color.toString());\n                }\n            });\n            this.gradientCache[key] = gradient;\n        }\n        return this.gradientCache[key];\n    };\n    ImagePool.prototype.generateGradientKey = function (params) {\n        var type = params.type, width = params.width, height = params.height, steps = params.steps, angle = params.angle, cx = params.cx, cy = params.cy, size = params.size;\n        return \"gradient-\".concat(type, \"-\").concat((angle === null || angle === void 0 ? void 0 : angle.toString()) || 0, \"-\").concat((cx === null || cx === void 0 ? void 0 : cx.toString()) || 0, \"-\").concat((cy === null || cy === void 0 ? void 0 : cy.toString()) || 0, \"-\").concat((size === null || size === void 0 ? void 0 : size.toString()) || 0, \"-\").concat(width, \"-\").concat(height, \"-\").concat(steps\n            .map(function (_a) {\n            var offset = _a.offset, color = _a.color;\n            return \"\".concat(offset).concat(color);\n        })\n            .join('-'));\n    };\n    ImagePool.prototype.generatePatternKey = function (pattern) {\n        var image = pattern.image, repetition = pattern.repetition;\n        // only generate cache for Image\n        if (isString(image)) {\n            return \"pattern-\".concat(image, \"-\").concat(repetition);\n        }\n        else if (image.nodeName === 'rect') {\n            return \"pattern-\".concat(image.entity, \"-\").concat(repetition);\n        }\n    };\n    return ImagePool;\n}());\nexport { ImagePool };\n//# sourceMappingURL=ImagePool.js.map","import { ElementEvent, Shape } from '@antv/g-lite';\nimport { isString } from '@antv/util';\nvar LoadImagePlugin = /** @class */ (function () {\n    function LoadImagePlugin() {\n    }\n    LoadImagePlugin.prototype.apply = function (context) {\n        var renderingService = context.renderingService, renderingContext = context.renderingContext, imagePool = context.imagePool;\n        var canvas = renderingContext.root.ownerDocument.defaultView;\n        var calculateWithAspectRatio = function (object, imageWidth, imageHeight) {\n            var _a = object.parsedStyle, width = _a.width, height = _a.height;\n            if (width && !height) {\n                object.setAttribute('height', (imageHeight / imageWidth) * width);\n            }\n            else if (!width && height) {\n                object.setAttribute('width', (imageWidth / imageHeight) * height);\n            }\n        };\n        var handleMounted = function (e) {\n            var object = e.target;\n            var nodeName = object.nodeName, attributes = object.attributes;\n            if (nodeName === Shape.IMAGE) {\n                var img = attributes.img, keepAspectRatio_1 = attributes.keepAspectRatio;\n                if (isString(img)) {\n                    imagePool.getImageSync(img, function (_a) {\n                        var width = _a.width, height = _a.height;\n                        if (keepAspectRatio_1) {\n                            calculateWithAspectRatio(object, width, height);\n                        }\n                        // set dirty rectangle flag\n                        object.renderable.dirty = true;\n                        renderingService.dirtify();\n                    });\n                }\n            }\n        };\n        var handleAttributeChanged = function (e) {\n            var object = e.target;\n            var attrName = e.attrName, newValue = e.newValue;\n            if (object.nodeName === Shape.IMAGE) {\n                if (attrName === 'img') {\n                    if (isString(newValue)) {\n                        imagePool.getOrCreateImage(newValue).then(function (_a) {\n                            var width = _a.width, height = _a.height;\n                            if (object.attributes.keepAspectRatio) {\n                                calculateWithAspectRatio(object, width, height);\n                            }\n                            // set dirty rectangle flag\n                            object.renderable.dirty = true;\n                            renderingService.dirtify();\n                        });\n                    }\n                }\n            }\n        };\n        renderingService.hooks.init.tap(LoadImagePlugin.tag, function () {\n            canvas.addEventListener(ElementEvent.MOUNTED, handleMounted);\n            canvas.addEventListener(ElementEvent.ATTR_MODIFIED, handleAttributeChanged);\n        });\n        renderingService.hooks.destroy.tap(LoadImagePlugin.tag, function () {\n            canvas.removeEventListener(ElementEvent.MOUNTED, handleMounted);\n            canvas.removeEventListener(ElementEvent.ATTR_MODIFIED, handleAttributeChanged);\n        });\n    };\n    LoadImagePlugin.tag = 'LoadImage';\n    return LoadImagePlugin;\n}());\nexport { LoadImagePlugin };\n//# sourceMappingURL=LoadImagePlugin.js.map","import { __extends } from \"tslib\";\nimport { AbstractRendererPlugin } from '@antv/g-lite';\nimport { ImagePool } from './ImagePool';\nimport { LoadImagePlugin } from './LoadImagePlugin';\nexport { ImagePool };\nvar Plugin = /** @class */ (function (_super) {\n    __extends(Plugin, _super);\n    function Plugin() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.name = 'image-loader';\n        return _this;\n    }\n    Plugin.prototype.init = function () {\n        // @ts-ignore\n        this.context.imagePool = new ImagePool(this.context.config);\n        this.addRenderingPlugin(new LoadImagePlugin());\n    };\n    Plugin.prototype.destroy = function () {\n        this.removeAllRenderingPlugins();\n    };\n    return Plugin;\n}(AbstractRendererPlugin));\nexport { Plugin };\n//# sourceMappingURL=index.js.map"],"names":[],"mappings":"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"}